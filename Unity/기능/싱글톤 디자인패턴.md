# 싱글톤 (Singleton) 디자인 패턴
### 1. 싱글톤이란?
- 어떤 문제를 해결하기 위한 비슷한 코드들이 많을 때 사용하는 디자인 패턴
- 클래스 오브젝트를 단 하나만 생성하고자 할 때 사용
  
### 2. 기본 싱글톤 패턴
```cs
public class SingletonClass
{  
    // private로 클래스 외부에서 호출하지 못하도록 함.
    private SingletonClass()
    {

    }

    public static SingletonClass Instance
    {
        get
        {
            // 인스턴스가 없다면
            if (Instance == null)
            {
                // 인스턴스 생성
                Instance = new SingletonClass();
            }
            return Instance;
        }
        private set
        {
            Instance = value;
        }
    }
}
```
### 3. 유니티 싱글톤 패턴
```cs
// MonoBehaviour 를 상속받는 싱글톤 클래스
public class SingletonClass : MonoBehaviour
{
    private static SingletonClass instance;
    public static SingletonClass Instance
    {
        get
        {
            // 인스턴스가 없다면
            if (instance == null)
            {
                // 씬에 싱글톤이 붙어있는 오브젝트 검사
                var obj = FindObjectOfType<SingletonClass>();
                // 있다면
                if (obj != null)
                {
                    // 오브젝트 반환
                    instance = obj;
                }
                // 없다면
                else
                {
                    // 싱글톤 클래스를 가진 오브젝트를 생성
                    var newSingleton = new GameObject("Singleton Class").AddComponent<SingletonClass>();

                    // 새로 만든 오브젝트 반환
                    instance = newSingleton;
                }
            }
            return instance;
        }
        private set
        {
            instance = value;
        }
    }
    
    // Awake 로 가장 먼저 중복 검사
    private void Awake()
    {
        // 씬에 싱글톤이 붙어있는 오브젝트들 검사
        var objs = FindObjectsOfType<SingletonClass>();
        // 오브젝트 여러개라면
        if (objs.Length != 1)
        {
            // 오브젝트 파괴
            Destroy(gameObject);
            return;
        }
        // 씬이 변경되어도 파괴되지 않도록 보호
        DontDestroyOnLoad(gameObject);
    }
```
### 4. 싱글톤 장단점
- 장점: 오브젝트를 생성하거나 탐색해서 찾을 필요없이 instance 프로퍼티를 통해 빠른 접근 가능
```cs
var singleton = SingletonClass.Instance;
singleton.Function();
```
- 단점: 너무 많은 코드를 싱글톤으로 사용하면 이해하고 정리할 수 없음